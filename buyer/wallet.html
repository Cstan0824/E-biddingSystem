<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preliminary Layout Â· Wallet</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <main class="viewport">
        <section class="device-shell">


            <section class="screen no-scroll">
                <div class="screen-header compact">
                    <h1>My Wallet</h1>
                </div>

                <article class="wallet-card">
                    <header class="wallet-card-header">
                        <div>
                            <p class="wallet-label">Bidding Wallet</p>
                        </div>
                        <div class="wallet-tiles">
                            <span></span>
                            <span></span>

                        </div>
                    </header>
                    <div class="wallet-card-body">
                        <p class="wallet-sub">Total Balance</p>
                        <p class="wallet-balance">RM XXXX.XX</p>
                        <p class="wallet-number">XXXX XXXX XXXX XXXX</p>
                    </div>
                    <div class="wallet-meta">
                        <div>
                            <p>Card Holder</p>
                            <strong>Bidding User</strong>
                        </div>
                        <div>
                            <p>Valid Thru</p>
                            <strong>Date</strong>
                        </div>
                    </div>
                </article>

                <button class="wallet-action" type="button" data-flow-trigger>
                    Top up wallet
                </button>

                <section class="transactions">
                    <div class="transactions-header">
                        <div>
                            <h2>Latest Transactions</h2>
                            <small>Summary list</small>
                        </div>
                        <button class="link-button" type="button"
                            onclick="window.location.href='transaction-history.html'">View all</button>
                    </div>
                    <article class="transaction-row">
                        <div class="transaction-icon" aria-hidden="true">ICON</div>
                        <div class="transaction-details">
                            <p>Transaction</p>
                            <small>Date and Time of Transaction</small>
                        </div>
                        <strong class="positive">RMXXXX.XX</strong>
                    </article>
                    <article class="transaction-row">
                        <div class="transaction-icon" aria-hidden="true">ICON</div>
                        <div class="transaction-details">
                            <p>Transaction</p>
                            <small>Date and Time of Transaction</small>
                        </div>
                        <strong class="negative">RMXXXX.XX</strong>
                    </article>
                </section>
            </section>

            <nav class="bottom-nav" aria-label="Primary">
                <a href="index.html">Home</a>
                <a href="history.html">Active</a>
                <a href="receipts.html">History</a>
                <a href="wallet.html" class="active">Wallet</a>
                <a href="profile.html">Profile</a>
            </nav>
        </section>
    </main>

    <section class="flow-overlay" aria-hidden="true" hidden>
        <div class="flow-panel" data-flow-step="payment">
            <div class="flow-toolbar">
                <button class="flow-icon-button" type="button" aria-label="Close" data-flow-close></button>
                <h2>Choose Payment</h2>
                <span></span>
            </div>
            <div class="payment-list">
                <button class="payment-option selected" type="button" data-method="paypal">
                    <div class="payment-icon" aria-hidden="true">ICON</div>
                    <div>
                        <p>Payment Method</p>
                        <small>Verification Details</small>
                    </div>
                    <span class="radio"></span>
                </button>
                <button class="payment-option" type="button" data-method="mastercard">
                    <div class="payment-icon" aria-hidden="true">ICON</div>
                    <div>
                        <p>Payment Method</p>
                        <small>Verification Details</small>
                    </div>
                    <span class="radio"></span>
                </button>
                <button class="payment-option" type="button" data-method="wise">
                    <div class="payment-icon" aria-hidden="true">ICON</div>
                    <div>
                        <p>Payment Method</p>
                        <small>Verification Details</small>
                    </div>
                    <span class="radio"></span>
                </button>
                <button class="payment-option" type="button" data-method="dana">
                    <div class="payment-icon" aria-hidden="true">ICON</div>
                    <div>
                        <p>Payment Method</p>
                        <small>Verification Details</small>
                    </div>
                    <span class="radio"></span>
                </button>
            </div>
            <button class="flow-primary" type="button" data-flow-next="topup">Continue</button>
        </div>

        <div class="flow-panel" data-flow-step="topup" hidden>
            <div class="flow-toolbar">
                <button class="flow-icon-button" type="button" aria-label="Close" data-flow-close></button>
                <h2>Top-up</h2>
                <span></span>
            </div>
            <div class="topup-display">
                <p class="topup-amount" data-amount-display>RMXXXX.XX</p>
                <small>Top-up amount</small>
            </div>
            <button class="flow-primary" type="button" data-flow-next="pin">Continue</button>
            <div class="preset-amounts">
                <button type="button" data-quick-amount="100">RMXXX</button>
                <button type="button" data-quick-amount="150">RMXXX</button>
                <button type="button" data-quick-amount="250">RMXXX</button>
                <button type="button" data-quick-amount="450">RMXXX</button>
            </div>
            <div class="keypad" data-keypad>
                <button type="button" data-key="1"><strong>1</strong></button>
                <button type="button" data-key="2"><strong>2</strong></button>
                <button type="button" data-key="3"><strong>3</strong></button>
                <button type="button" data-key="4"><strong>4</strong></button>
                <button type="button" data-key="5"><strong>5</strong></button>
                <button type="button" data-key="6"><strong>6</strong></button>
                <button type="button" data-key="7"><strong>7</strong></button>
                <button type="button" data-key="8"><strong>8</strong></button>
                <button type="button" data-key="9"><strong>9</strong></button>
                <button type="button" data-key="."><strong>.</strong></button>
                <button type="button" data-key="0"><strong>0</strong></button>
                <button type="button" data-key="back" aria-label="Delete"></button>
            </div>
        </div>

        <div class="flow-panel" data-flow-step="pin" hidden>
            <div class="flow-toolbar">
                <button class="flow-icon-button" type="button" aria-label="Close" data-flow-close></button>
                <h2>Enter Your Pin</h2>
                <span></span>
            </div>
            <p class="pin-instruction">Enter your pin to confirm top-up</p>
            <div class="pin-dots" data-pin-dots>
                <span></span><span></span><span></span><span></span>
            </div>
            <button class="flow-primary secondary" type="button" data-pin-submit disabled>Continue</button>
            <div class="keypad" data-pin-pad>
                <button type="button" data-key="1"><strong>1</strong></button>
                <button type="button" data-key="2"><strong>2</strong></button>
                <button type="button" data-key="3"><strong>3</strong></button>
                <button type="button" data-key="4"><strong>4</strong></button>
                <button type="button" data-key="5"><strong>5</strong></button>
                <button type="button" data-key="6"><strong>6</strong></button>
                <button type="button" data-key="7"><strong>7</strong></button>
                <button type="button" data-key="8"><strong>8</strong></button>
                <button type="button" data-key="9"><strong>9</strong></button>
                <span></span>
                <button type="button" data-key="0"><strong>0</strong></button>
                <button type="button" data-key="back" aria-label="Delete"></button>
            </div>
        </div>
    </section>

    <script>
        (function () {
            const overlay = document.querySelector('.flow-overlay');
            const trigger = document.querySelector('[data-flow-trigger]');
            if (!overlay || !trigger) {
                return;
            }
            const steps = {
                payment: document.querySelector('[data-flow-step="payment"]'),
                topup: document.querySelector('[data-flow-step="topup"]'),
                pin: document.querySelector('[data-flow-step="pin"]')
            };
            const paymentOptions = overlay.querySelectorAll('.payment-option');
            const results = {
                amount: document.querySelector('[data-amount-display]'),
                pinDots: document.querySelectorAll('[data-pin-dots] span'),
                pinButton: document.querySelector('[data-pin-submit]')
            };
            let activeStep = 'payment';
            let amountValue = '';
            let pinValue = '';

            const showStep = (name) => {
                activeStep = name;
                Object.entries(steps).forEach(([key, panel]) => {
                    panel.hidden = key !== name;
                });
            };

            const formatAmount = () => {
                const value = parseFloat(amountValue);
                results.amount.textContent = `RMXXXXX.XX`;
            };

            const updatePinDots = () => {
                results.pinDots.forEach((dot, index) => {
                    dot.classList.toggle('filled', index < pinValue.length);
                });
                results.pinButton.disabled = pinValue.length !== 4;
            };

            const resetFlow = () => {
                amountValue = '';
                pinValue = '';
                formatAmount();
                updatePinDots();
                paymentOptions.forEach((btn, index) => {
                    btn.classList.toggle('selected', index === 0);
                });
                showStep('payment');
            };

            const showOverlay = () => {
                overlay.hidden = false;
                overlay.setAttribute('aria-hidden', 'false');
                resetFlow();
            };

            const hideOverlay = () => {
                overlay.hidden = true;
                overlay.setAttribute('aria-hidden', 'true');
            };

            overlay.addEventListener('click', (event) => {
                if (event.target === overlay) hideOverlay();
            });

            overlay.querySelectorAll('[data-flow-close]').forEach((btn) =>
                btn.addEventListener('click', hideOverlay)
            );

            overlay.querySelectorAll('[data-flow-next]').forEach((btn) => {
                btn.addEventListener('click', () => {
                    showStep(btn.dataset.flowNext);
                });
            });

            paymentOptions.forEach((option) => {
                option.addEventListener('click', () => {
                    paymentOptions.forEach((btn) => btn.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });

            overlay.querySelectorAll('[data-quick-amount]').forEach((pill) => {
                pill.addEventListener('click', () => {
                    amountValue = pill.dataset.quickAmount;
                    formatAmount();
                });
            });

            overlay.querySelectorAll('[data-keypad] button').forEach((btn) => {
                btn.addEventListener('click', () => {
                    const key = btn.dataset.key;
                    if (key === 'back') {
                        amountValue = amountValue.slice(0, -1);
                    } else if (key === '.' && amountValue.includes('.')) {
                        return;
                    } else {
                        amountValue += key;
                    }
                    formatAmount();
                });
            });

            overlay.querySelectorAll('[data-pin-pad] button').forEach((btn) => {
                btn.addEventListener('click', () => {
                    const key = btn.dataset.key;
                    if (key === 'back') {
                        pinValue = pinValue.slice(0, -1);
                    } else if (pinValue.length < 4 && key !== 'back') {
                        pinValue += key;
                    }
                    updatePinDots();
                });
            });

            results.pinButton.addEventListener('click', () => {
                pinValue = '';
                updatePinDots();
                hideOverlay();
            });
            trigger.addEventListener('click', showOverlay);
        })();
    </script>
</body>

</html>